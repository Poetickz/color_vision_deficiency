

intensity_rgb = {0.255255255: 0.0, 0.000000000: 0.0, 0.000059270: 0.0, 0.000060270: 0.053102737968577, 0.000061270: 0.2765411705238124, 0.000062270: 0.264215422591702, 0.000063270: 0.21146073133969842, 0.000064270: 0.18451800472435056, 0.000065270: 0.160080764360928, 0.000066270: 0.13793894916097832, 0.000067270: 0.11972406542747717, 0.000068270: 0.10417034501273933, 0.000069270: 0.0908017465655925, 0.000070270: 0.08476390412648174, 0.000071270: 0.07870322763771943, 0.000072269: 0.07334046638791672, 0.000073269: 0.06820236327828987, 0.000074269: 0.063197160088991, 0.000075269: 0.058316059701416, 0.000076269: 0.05340781531576357, 0.000077269: 0.04852370122204457, 0.000078268: 0.04345963160248757, 0.000079268: 0.03833975284420228, 0.000081268: 0.03291574730701857, 0.000082267: 0.027414158783169714, 0.000084267: 0.0211839637418565, 0.000086267: 0.0152436947463365, 0.000087266: 0.009228899464869624, 0.000089266: 0.0032636213618713336, 0.000091266: 0.0, 0.000093265: 0.0, 0.000095265: 0.0, 0.000098264: 0.0, 0.000100263: 0.0, 0.000103262: 0.0, 0.000106261: 0.0, 0.000109260: 0.0, 0.000113259: 0.0, 0.000116257: 0.0, 0.000119256: 0.0, 0.000123254: 0.0, 0.000126253: 0.0, 0.000130251: 0.0, 0.016134249: 0.0, 0.055138246: 0.0, 0.076142244: 0.0, 0.093146241: 0.0, 0.108151238: 0.0, 0.120155235: 0.0, 0.132159232: 0.0, 0.143164228: 0.0, 0.153168224: 0.0, 0.162172220: 0.0, 0.170175216: 0.0, 0.178179212: 0.0, 0.187183207: 0.0, 0.195187202: 0.0, 0.202191196: 0.0, 0.210194190: 0.0, 0.217198184: 0.0, 0.223201178: 0.0, 0.229204171: 0.0, 0.235207165: 0.0, 0.239210158: 0.005006688651884, 0.244212152: 0.011969811365385713, 0.248214145: 0.02032239579992314, 0.252216138: 0.030068125347769713, 0.255218131: 0.041406944633452, 0.258220123: 0.054235201966917286, 0.261221115: 0.06865371947353628, 0.264222107: 0.08441725179754943, 0.267224099: 0.10146463116691642, 0.269225090: 0.11940347953054986, 0.271226081: 0.13797253412651914, 0.272226072: 0.15667108036029442, 0.273227062: 0.17505026437954357, 0.274227052: 0.19133790440881182, 0.275227040: 0.20763445501592387, 0.275227024: 0.22204126730948684, 0.276227000: 0.234154537469728, 0.276226000: 0.253929306737311, 0.276225000: 0.24957689853472936, 0.275225000: 0.244989799717408, 0.275224000: 0.2402218408643836, 0.274224000: 0.23623029481243266, 0.274223000: 0.23384673294040337, 0.273222000: 0.23327832552627517, 0.272222000: 0.234478369503435, 0.272221000: 0.23659125679508766, 0.271220000: 0.23851803920188672, 0.270220000: 0.23956083592241215, 0.270219000: 0.23900136675883044, 0.269218000: 0.2369158766598357, 0.268218000: 0.23389383781507972, 0.267217000: 0.23111975397276985, 0.267216000: 0.22952218111436515, 0.266216000: 0.22984986638575872, 0.265215000: 0.23225596700253642, 0.264214000: 0.2363230706797357, 0.263213000: 0.24141561142345086, 0.262212000: 0.24657807245566715, 0.261212000: 0.25103330967263343, 0.260211000: 0.253900915970257, 0.259210000: 0.255061969035263, 0.258209000: 0.2540573194404495, 0.257208000: 0.2504794562012165, 0.256207000: 0.2445748771334815, 0.255207000: 0.23614583042218676, 0.254206000: 0.225675901256224, 0.253205000: 0.21316945584249863, 0.252204000: 0.19918848356288166, 0.251203000: 0.18492885730008243, 0.250202000: 0.16916618708564113, 0.249201000: 0.15247441871790415, 0.248200000: 0.13611031121645328, 0.247199000: 0.120589147470475, 0.246198000: 0.10539804329649571, 0.244197000: 0.08897686747826, 0.243196000: 0.075078024821475, 0.242196000: 0.062234602546184715, 0.241195000: 0.05144737331123184, 0.240194000: 0.04100794524851638, 0.238193000: 0.0318383030792505, 0.237192000: 0.0238896293420665, 0.236191000: 0.017072443517987833, 0.235190000: 0.01134271440032525, 0.234189000: 0.006539354683617166, 0.232188000: 0.002843946544978143, 0.231187000: 0.0, 0.230186000: 0.0, 0.229185000: 0.0, 0.227184000: 0.0, 0.226183000: 0.0, 0.225182000: 0.0, 0.224181000: 0.0, 0.223180000: 0.0, 0.221179000: 0.0, 0.220178000: 0.0, 0.219177000: 0.0, 0.218176000: 0.0, 0.217175000: 0.0, 0.216174000: 0.0, 0.214173000: 0.0, 0.213172000: 0.0, 0.212171000: 0.0, 0.211170000: 0.0, 0.210169000: 0.0, 0.209168000: 0.0, 0.208167000: 0.0, 0.207167000: 0.0, 0.206166000: 0.0, 0.205165000: 0.0005931232408913967, 0.204164000: 0.004876149188947857, 0.203163000: 0.010539018996576143, 0.202163000: 0.01760566586411043, 0.201162000: 0.026515155352900287, 0.200161000: 0.03647104126737683, 0.199160000: 0.04951813278525712, 0.198160000: 0.0647561804238495, 0.197159000: 0.08272956836841237, 0.196158000: 0.10309912612601983, 0.195157000: 0.14939981637785113, 0.194156000: 0.17691993619206373, 0.193156000: 0.2056250852722177, 0.193155000: 0.23573532277264558, 0.192154000: 0.263909651664485, 0.191154000: 0.2942517408209965, 0.191153000: 0.3234759032863223, 0.190153000: 0.349377927190955, 0.189152000: 0.3742390949490714, 0.188151000: 0.4156891030047927, 0.187151000: 0.43114259212603917, 0.187150000: 0.4420634839749435, 0.186150000: 0.450473426480799, 0.186149000: 0.4558810944662055, 0.185149000: 0.45873560429016225, 0.184148000: 0.46049741228196056, 0.183147000: 0.464415679917976, 0.182147000: 0.47632610232731126, 0.182146000: 0.4832819087313795, 0.181146000: 0.5006791768052263, 0.181145000: 0.5184948438702605, 0.180145000: 0.525702263136827, 0.180144000: 0.530382098704968, 0.179144000: 0.5250781627286705, 0.178143000: 0.48750953531226565, 0.177143000: 0.404394675557949, 0.177142000: 0.3824560981538117, 0.176142000: 0.32324178735074627, 0.176141000: 0.318591398652988, 0.175141000: 0.42667996023661187, 0.175140000: 0.8121929753447211, 0.174140000: 0.9044144661698051}


def modify_rgb(rgb_tuple, level=0.5):
    rgb_id = parse_rgb(rgb_tuple)
    intensity = find_apx_intensity(rgb_id)
    new_rgb = convert(rgb_tuple, intensity, level)
    new_rgb_int = round_int_rgb(new_rgb)
    return new_rgb_int

def parse_rgb(rgb_tuple):
    return float("0."+'{:03d}'.format(rgb_tuple[0])+'{:03d}'.format(rgb_tuple[1])+'{:03d}'.format(rgb_tuple[2]))

def find_apx_intensity(rgb_id):
    return min(intensity_rgb, key=lambda x:abs(x-rgb_id))

def convert(rgb_tuple, intensity, level):
    if intensity > 0:
        return (brigthness_level(rgb_tuple[0],intensity,level), brigthness_level(rgb_tuple[1],intensity,level), brigthness_level(rgb_tuple[2],intensity,level))
        
    return ((rgb_tuple[0]*level, rgb_tuple[1]*level, rgb_tuple[2]*level))

def brigthness_level(color, downgrade, level):
  return (color*level)*(1 + downgrade)

def rgb_int_to_float(rgb_int):
    return (float(rgb_int[0]/255.00000), float(rgb_int[1]/255.00000),  float(rgb_int[2]/255.00000))

def round_int_rgb(rgb_tuple):
    return (round(rgb_tuple[0]),round(rgb_tuple[1]),round(rgb_tuple[2]))